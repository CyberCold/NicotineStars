<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Результаты поиска</title>
    <script src="loadProducts.js" defer></script>
</head>
<body>
    <h1>Результаты поиска</h1>
    <div id="results"></div>

    <script>
        async function displayResults() {
            const query = new URLSearchParams(window.location.search).get('q');
            if (!query) {
                document.getElementById('results').innerHTML = "<p>Нет запроса.</p>";
                return;
            }

            const products = await loadProducts();
            const results = searchProducts(query, products);

            const resultsContainer = document.getElementById('results');
            if (results.length === 0) {
                resultsContainer.innerHTML = "<p>Товары не найдены.</p>";
                return;
            }

            resultsContainer.innerHTML = results.map(product => `
                <div class="product">
                    <img src="${product.img}" alt="${product.name}" />
                    <p>${product.name}</p>
                    <p>Цена: ${product.price} €</p>
                </div>
            `).join('');
        }

        displayResults();
    </script>
</body>
</html>
